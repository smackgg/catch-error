!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("CatchError",[],e):"object"==typeof exports?exports.CatchError=e():t.CatchError=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=t.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=t.toString();return e.indexOf(n)<0&&(e=n+"@"+e),e}function i(t,e){return Object.prototype.toString.call(t)==="[object "+(e||"Object")+"]"}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(c),l={vConsole:"//s.url.cn/qqun/qun/qqweb/m/qun/confession/js/vconsole.min.js",method:"post",showDevtools:!1},f=function(){function t(){var e=this;o(this,t),this.onerror=function(t,n,o,s,a){e.windowError&&e.windowError(t,n,o,s,a);var c=t;a&&a.stack&&(c=r(a)),i(c,"Event")&&(c+=c.type?"--"+c.type+"--"+(c.target?c.target.tagName+"::"+c.target.src:""):""),c=(""+c||"").substr(0,500);var l={msg:c,timestamp:Date.now(),userAgent:window.navigator.userAgent,targetUrl:n,line:o,col:s};(0,u.default)({method:e.config.method,url:e.config.url,data:l})},this.vConsole=function(t){e.loadScript(e.config.vConsole).then(function(){e.store.forEach(function(t){var e=t;e.noOrigin=!0,window.vConsole.pluginList.default.printLog(e)}),t&&window.addEventListener("load",function(){window.vConsole.show()})})},this.loadScript=function(t){return new Promise(function(n){var o=!1,r=document.createElement("script");r.type="text/javascript",r.src=t;var i=function(){o||e.readyState&&"complete"!==e.readyState||(o=!0,n())};r.onload=i,r.onreadystatechange=i;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s)})}}return a(t,[{key:"init",value:function(t){this.store=[],this.config=s(l,t),window.onerror&&(this.windowError=window.onerror),this.config.url&&(window.onerror=this.onerror);var e=this;["log","info","warn","debug","error"].forEach(function(t){var n=console[t];console[t]=function(){e.store.push({logType:t,logs:arguments}),n.apply(console,arguments)}}),(this.config.showDevtools||/devtools=show/.test(window.location.search))&&this.vConsole(this.config.showConsole)}}]),t}();e.default=f},function(t,e,n){"use strict";function o(t){var e=t.url,n=t.data,o=t.method,r=void 0===o?"post":o;return new Promise(function(t,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?t(i.responseText,i.status,i):o(new Error("请求错误: "+i.status+" "+i.statusText)))},"get"===r&&(i.open(r,e,!0),i.send(null)),"post"===r&&(i.open(r,e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(JSON.stringify(n)))})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o}])});